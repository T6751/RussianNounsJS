<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>

    <meta name="viewport" content="width=1600, initial-scale=1"/>

    <script src="js/third-party/jquery-3.5.1.js"></script>
    <script src="js/third-party/angular.min.js"></script>

    <script src="js/third-party/bootstrap-3.3.7-dist/js/bootstrap.js"></script>
    <link rel="stylesheet" href="js/third-party/bootstrap-3.3.7-dist/css/bootstrap.css"/>

    <script src="js/third-party/ngtable202.js"></script>
    <link rel="stylesheet" href="js/third-party/ngtable202.css"/>

    <script src="js/third-party/underscore.js"></script>
    <script src="js/RussianNouns.min.js"></script>
    <script src="js/testRunner.js"></script>
</head>
<body ng-app="testApp">

<style>
    .row {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }

    #loadingBar .status {
        width: 0;
        background: #77de00;
        height: 3px;
    }

    #resultTableHeader {
        table-layout: fixed;
        margin-bottom: 0;
    }

    #resultTable > thead {
        display: none;
    }

    #resultTable > tbody > tr > td {
        padding: 0;
    }

    .resultInnerTable {
        table-layout: fixed;
        background-color: transparent !important;
        margin: 0;
    }

    .resultInnerTable th {
        font-weight: normal;
        text-align: left;
        border: 0 !important;

        height: 6.1em;
        user-select: auto;
    }

    .resultInnerTable th.bg-danger {
        background: #ffcfbf;
    }

    .resultInnerTable th.bg-warning {
        background: #fcea92;
    }

    .table-hover > tbody > tr:hover .resultInnerTable th.bg-danger {
        background: #ffbba6;
    }

    .table-hover > tbody > tr:hover .resultInnerTable th.bg-warning {
        background: #ffe573;
    }

    .resultInnerTable tr.plural {
        background: #fffafa;
    }

    .table-hover > tbody > tr:hover .resultInnerTable tr.plural {
        background: transparent;
    }

    .decl-col {
        width: 4em;
    }

    .gender-col {
        width: 6em;
    }

    .words-valid,
    .words-warnings,
    .words-errors {
    }

    .words-valid {
        color: #78b159;
    }

    .words-warnings {
        color: #ffac33;
    }

    .words-errors {
        color: #dd2e44;
    }

    #summary tr > td:first-of-type {
        padding-left: 1rem;
    }

    #summary td {
        padding-right: 1rem;
    }

    input[type="checkbox"] {
        margin-top: 0px;
        width: 16px;
        height: 16px;
    }
</style>

<div class="container-fluid" ng-controller="TestRunnerController">
    <div>

        <div ng-if="!items">
            <div id="loadingBar" style="margin-top: 5rem;">
                <div class="status"></div>
            </div>
        </div>

        <div ng-if="items">

            <div class="row">
                <div class="col-xs-10">
                    <table id="summary">
                        <tr class="bg-success">
                            <td class="text-right">
                                <strong>
                                    Правильные слова в ед. ч.
                                </strong>
                            </td>
                            <td>
                                {{wordsCorrectSingular}} / {{totalWordsSingular}} ({{wordsCorrectSingularShare | number:2}}%)
                            </td>
                        </tr>
                        <tr class="bg-success">
                            <td class="text-right">
                                <strong>
                                    Правильные формы слов в ед. ч.
                                </strong>
                            </td>
                            <td>
                                {{wordFormsCorrect}} / {{wordFormsTotal}} ({{wordFormsCorrectShare | number:2}}%)
                            </td>
                        </tr>
                        <tr class="bg-warning">
                            <td class="text-right">
                                <strong>
                                    Слова с предупреждениями в ед. ч.
                                </strong>
                            </td>
                            <td>
                                {{wordsHasWarningsSingular}} / {{totalWordsSingular}} ({{wordsHasWarningsSingularShare |
                                number:2}}%)
                            </td>
                        </tr>
                        <tr class="bg-success">
                            <td class="text-right">
                                <strong>
                                    Правильная плюрализация
                                </strong>
                            </td>
                            <td>
                                {{pluralizeCorrectWords}} / {{pluralizeTotalWords}}
                                ({{pluralizeCorrectShare | number:2}}%)
                            </td>
                        </tr>
                        <tr class="bg-success">
                            <td class="text-right">
                                <strong>
                                    Правильное склонение в мн. ч. (формы слов)
                                </strong>
                            </td>
                            <td>
                                {{pluralWordFormsCorrect}} / {{pluralWordFormsTotal}}
                                ({{pluralWordFormsCorrectShare | number:2}}%)
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="col-xs-2 text-right">

                    <a class="btn btn-lg btn-default"
                       style="padding: .4rem 1.5rem .45rem 1.1rem; border-color: #575757;"
                       href="https://github.com/georgy7/RussianNounsJS"
                       target="_blank"
                       title="Star RussianNounsJS on GitHub.">
                        <span style="vertical-align: -5%; font-size: 127%; line-height: 1;">★</span>
                        <span style="vertical-align: middle; font-size: 85%;">Star</span>
                    </a>

                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">
                    <div class="btn-group" role="group" aria-label="Режим таблицы">
                        <button type="button"
                                aria-label="Все слова"
                                class="btn btn-secondary"
                                ng-class="{'active': (wordTableMode === 1)}"
                                ng-click="setWordTableMode(1)">
                            <span class="words-valid">◼</span><span class="words-warnings">◼</span><span class="words-errors">◼</span>
                        </button>
                        <button type="button"
                                aria-label="Слова с предупреждениями и ошибками"
                                class="btn btn-secondary"
                                ng-class="{'active': (wordTableMode === 2)}"
                                ng-click="setWordTableMode(2)">
                            <span class="words-warnings">◼</span><span class="words-errors">◼</span>
                        </button>
                        <button type="button"
                                aria-label="Только слова с ошибками"
                                class="btn btn-secondary"
                                ng-class="{'active': (wordTableMode === 3)}"
                                ng-click="setWordTableMode(3)">
                            <span class="words-errors">◼</span>
                        </button>
                    </div>

                    <div style="width: 15rem; display: inline-block; vertical-align: middle; margin-left: 1rem;">
                        <select class="form-control"
                                ng-model="filter.gender"
                                ng-change="updateFilter();"
                                ng-options="g for g in genders">
                            <option value="">любой род</option>
                        </select>
                    </div>

                    <label class="checkbox-inline" style="margin-left: 1rem;"><input
                            type="checkbox"
                            ng-model="filter.frequentOnly"
                            ng-change="updateFilter();">Часто употребляемые</label>

                </div>
            </div>

            <div class="row">
                <div class="col-sm-12">

                    <table id="resultTableHeader" class="table table-hover">
                        <tr>
                            <th>
                                <span class="text-muted">Есть</span><br/>
                                Кто? Что?
                            </th>
                            <th>
                                <span class="text-muted">Нет</span><br/>
                                Кого? Чего?
                            </th>
                            <th>
                                <span class="text-muted">Доверять</span><br/>
                                Кому? Чему?
                            </th>
                            <th>
                                <span class="text-muted">Видеть</span><br/>
                                Кого? Что?
                            </th>
                            <th>
                                <span class="text-muted">Гордиться</span><br/>
                                Кем? Чем?
                            </th>
                            <th>
                                <span class="text-muted">Думать</span><br/>
                                О&nbsp;ком? О&nbsp;чем?
                            </th>
                            <th>
                                Местный падеж
                            </th>
                            <!--<th>В&nbsp;ком? В&nbsp;чем?</th>-->
                            <th rowspan="2" class="info decl-col">Скл.</th>
                            <th rowspan="2" class="info gender-col">Род</th>
                        </tr>

                        <tr>
                            <th>
                                &ndash;
                            </th>
                            <th>
                                у, около, от, без, из, до, для, вокруг, с/со, после
                            </th>
                            <th>
                                по, к/ко
                            </th>
                            <th>
                                через, про, на, за, под, о/об, в/во
                            </th>
                            <th>
                                с/со, перед, над, за, между
                            </th>
                            <th>
                                при, о/об, на, в/во
                            </th>
                            <th>
                                на, в/во
                            </th>
                            <!--<th>В&nbsp;ком? В&nbsp;чем?</th>-->
                        </tr>
                    </table>

                    <table id="resultTable" class="table table-hover" ng-table="wordTableParams">
                        <tbody>
                        <tr ng-repeat="item in $data track by item.id" ng-class="item.status">
                            <td>

                                <table class="table resultInnerTable">
                                    <tr>

                                        <!--&lt;!&ndash;<td>{{rowNumber}}</td>&ndash;&gt;-->

                                        <th ng-repeat="wordForm in item.wordForms"
                                            ng-class="{'bg-danger': wordForm.failure, 'bg-warning': wordForm.warning}">
                                            {{wordForm.actual}}
                                            <div ng-if="wordForm.failureOrWarning">Правильно: {{wordForm.expected}}
                                            </div>
                                        </th>

                                        <th rowspan="2"
                                            ng-style="{'background-color': declensionColor(item)}"
                                            class="decl-col">
                                            <div class="w-75 text-right"
                                                 ng-if="item.declension == -1"
                                                 title="Несклоняемое слово">
                                                {{item.declension}}
                                            </div>
                                            <div class="w-75 text-right"
                                                 ng-if="item.declension != -1">
                                                {{item.declension}}
                                            </div>
                                        </th>

                                        <th rowspan="2"
                                            ng-style="{'background-color': genderColor(item)}"
                                            class="gender-col">
                                            {{item.gender}}
                                        </th>

                                    </tr>
                                    <tr class="plural">

                                        <th ng-repeat="pluralForm in item.pluralForms"
                                            ng-class="{'bg-danger': pluralForm.failure, 'bg-warning': pluralForm.warning}">
                                            <div ng-if="(pluralForm.expected.length)">
                                                {{pluralForm.actual}}
                                                <div ng-if="pluralForm.failureOrWarning">Правильно: {{pluralForm.expected}}</div>
                                            </div>
                                        </th>


                                    </tr>
                                </table>

                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

    </div>
</div>

</body>
</html>